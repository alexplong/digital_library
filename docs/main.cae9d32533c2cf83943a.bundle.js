(()=>{"use strict";const e=class{constructor(e,t,a,l){this.title=e,this.author=t,this.pages=a,this.read=l}info(){return this.read?`${this.title} by ${this.author}, ${this.pages} pages read`:`${this.title} by ${this.author}, ${this.pages} pages, not read yet`}},t=()=>{const e=document.querySelector(".container");return{showLibrary:t=>{t.forEach((t=>{let a=document.createElement("div"),l=document.createElement("h4"),s=document.createElement("div"),r=document.createElement("span"),c=document.createElement("div"),n=document.createElement("span"),i=document.createElement("button"),o=document.createElement("label"),d=document.createElement("input"),u=document.createElement("span");s.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),c.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),a.setAttribute("class","card"),l.textContent=`${t.title}`,r.textContent=`By ${t.author}`,n.textContent=`${t.pages} pages`,i.textContent="X",l.setAttribute("class","title"),r.setAttribute("class","author"),n.setAttribute("class","page"),i.setAttribute("class","delete"),a.setAttribute("data-title",`${t.title}`),o.setAttribute("class","Switch"),d.setAttribute("type","checkbox"),d.setAttribute("class","Switch_Input"),u.setAttribute("class","Slider"),o.append(d,u),d.checked=t.read,s.append(r),c.append(n),a.append(l,s,c,o,i),e.append(a)}))},showBook:t=>{let a=document.createElement("div"),l=document.createElement("h4"),s=document.createElement("div"),r=document.createElement("span"),c=document.createElement("div"),n=document.createElement("span"),i=document.createElement("button"),o=document.createElement("label"),d=document.createElement("input"),u=document.createElement("span");s.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),c.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),a.setAttribute("class","card"),l.textContent=`${t.title}`,r.textContent=`By ${t.author}`,n.textContent=`${t.pages} pages`,i.textContent="X",l.setAttribute("class","title"),r.setAttribute("class","author"),n.setAttribute("class","page"),i.setAttribute("class","delete"),a.setAttribute("data-title",`${t.title}`),o.setAttribute("class","Switch"),d.setAttribute("type","checkbox"),d.setAttribute("class","Switch_Input"),u.setAttribute("class","Slider"),o.append(d,u),d.checked=t.read,s.append(r),c.append(n),a.append(l,s,c,o,i),e.append(a)},deleteBook:t=>{let a=document.querySelector(`[data-title='${t}']`);e.removeChild(a)}}};(()=>{let a=[];localStorage.getItem("booksArray")?(a=Array.from(JSON.parse(localStorage.getItem("booksArray"))),t().showLibrary(a)):a=[];const l=document.querySelector(".addBook"),s=document.querySelector(".addForm"),r=document.querySelector(".popup"),c=document.querySelector(".exitPop"),n=document.querySelector(".container");c.addEventListener("click",(()=>{r.classList.add("hide")})),l.addEventListener("click",(()=>r.classList.toggle("hide",!r.classList.contains("hide")))),s.addEventListener("submit",(l=>{l.preventDefault();let c=a.map((e=>e.title)),n=a.map((e=>e.author));if(""==s.children.Title.value||""==s.children.Author.value||""==s.children.Pages.value)console.log("Please fill in missing fields.");else if(c.includes(s.children.Title.value)&&n.includes(s.children.Author.value))console.log(`The book: ${s.children.Title.value}, authored by ${n.includes(s.children.Author.value)} is already in your library`);else{let l=new e(s.children.Title.value,s.children.Author.value,s.children.Pages.value,s.children[9].children.read.checked);a.push(l),t().showBook(l),localStorage.setItem("booksArray",JSON.stringify(a)),r.classList.add("hide"),s.reset()}})),n.addEventListener("click",(e=>{if(e.target.classList.contains("delete")){let l=e.target.parentNode.dataset.title,s=a.findIndex((e=>e.title===l));a.splice(s,1),localStorage.setItem("booksArray",JSON.stringify(a)),t().deleteBook(l)}if(e.target.classList.contains("Switch_Input")){let t=e.target.parentNode.parentNode.dataset.title,l=a.findIndex((e=>e.title===t));a[l].read=e.target.checked,localStorage.setItem("booksArray",JSON.stringify(a)),console.log(a)}}))})()})();