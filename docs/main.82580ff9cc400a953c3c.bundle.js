(()=>{"use strict";const e=class{constructor(e,t,a,r){this.title=e,this.author=t,this.pages=a,this.read=r}info(){return this.read?`${this.title} by ${this.author}, ${this.pages} pages read`:`${this.title} by ${this.author}, ${this.pages} pages, not read yet`}},t=()=>{const e=document.querySelector(".container");return{showLibrary:t=>{t.forEach((t=>{let a=document.createElement("div"),r=document.createElement("h4"),l=document.createElement("div"),s=document.createElement("span"),n=document.createElement("div"),c=document.createElement("span"),i=document.createElement("div"),o=document.createElement("input"),d=document.createElement("button");l.setAttribute("class","flex flex-dir-r flex-ai-c"),n.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),a.setAttribute("class","card"),r.textContent=`${t.title}`,s.textContent=`By ${t.author}`,c.textContent=`${t.pages} pages`,d.textContent="X",r.setAttribute("class","title"),s.setAttribute("class","author"),c.setAttribute("class","page"),o.setAttribute("class","read-button"),o.setAttribute("type","checkbox"),d.setAttribute("class","delete"),a.setAttribute("data-title",`${t.title}`),l.append(s),n.append(c),i.append(o),a.append(r,l,n,i,d),e.append(a)}))},showBook:t=>{let a=document.createElement("div"),r=document.createElement("h4"),l=document.createElement("div"),s=document.createElement("span"),n=document.createElement("div"),c=document.createElement("span"),i=document.createElement("div"),o=document.createElement("input"),d=document.createElement("button");l.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),n.setAttribute("class","flex flex-dir-r flex-ai-c flex-jc-c"),a.setAttribute("class","card"),r.textContent=`${t.title}`,s.textContent=`By ${t.author}`,c.textContent=`${t.pages} pages`,d.textContent="X",r.setAttribute("class","title"),s.setAttribute("class","author"),c.setAttribute("class","page"),o.setAttribute("class","read-button"),o.setAttribute("type","checkbox"),d.setAttribute("class","delete"),a.setAttribute("data-title",`${t.title}`),l.append(s),n.append(c),i.append(o),a.append(r,l,n,i,d),e.append(a)},deleteBook:t=>{let a=document.querySelector(`[data-title='${t}']`);e.removeChild(a)},readBook:e=>{document.querySelector()}}};(()=>{let a=[];localStorage.getItem("booksArray")?(a=Array.from(JSON.parse(localStorage.getItem("booksArray"))),t().showLibrary(a)):a=[];const r=document.querySelector(".addBook"),l=document.querySelector(".addForm"),s=document.querySelector(".popup"),n=document.querySelector(".exitPop"),c=document.querySelector(".container");n.addEventListener("click",(()=>{s.classList.add("hide")})),r.addEventListener("click",(()=>s.classList.toggle("hide",!s.classList.contains("hide")))),l.addEventListener("submit",(r=>{r.preventDefault();let n=a.map((e=>e.title)),c=a.map((e=>e.author));if(""==l.children.Title.value||""==l.children.Author.value||""==l.children.Pages.value)console.log("Please fill in missing fields.");else if(n.includes(l.children.Title.value)&&c.includes(l.children.Author.value))console.log(`The book: ${l.children.Title.value}, authored by ${c.includes(l.children.Author.value)} is already in your library`);else{let r=new e(l.children.Title.value,l.children.Author.value,l.children.Pages.value,l.children[9].children.read.checked);a.push(r),t().showBook(r),localStorage.setItem("booksArray",JSON.stringify(a)),s.classList.add("hide"),l.reset()}})),c.addEventListener("click",(e=>{if(e.target.classList.contains("delete")){let r=e.target.parentNode.dataset.title,l=a.findIndex((e=>e.title===r));a.splice(l,1),localStorage.setItem("booksArray",JSON.stringify(a)),t().deleteBook(r)}e.target.classList.contains("read-button")&&t().readBook(e.target.parentNode.parentNode.dataset.title)}))})()})();